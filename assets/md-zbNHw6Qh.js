import{_ as h}from"./slidev/VClick-CWYeJjke.js";import{_ as o}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-DIPFWlyn.js";import{o as d,c as g,k as l,e as i,l as t,m as D,ad as s,q as E,s as m,C as n}from"./modules/vue-CIkDTG0q.js";import{I as u}from"./slidev/default-CIk0mhBA.js";import{u as c,f as y}from"./slidev/context-C6S-lFxX.js";import"./index-CmvFqjLi.js";import"./modules/shiki-Dlt14PEl.js";import"./slidev/VClicks-MEt1bbVj.js";import"./modules/unplugin-icons-DahtZTTW.js";const Y={__name:"slides.md__slidev_20",setup(A){const{$slidev:C,$nav:f,$clicksContext:r,$clicks:B,$page:F,$renderContext:_,$frontmatter:p}=c();return r.setup(),(b,a)=>{const k=o,e=h;return d(),g(u,E(m(n(y)(n(p),19))),{default:l(()=>[a[4]||(a[4]=i("h1",null,"Layers!",-1)),t(k,D({maxHeight:"180px"},{ranges:["1-4","6","8,9","10","12,6","15-18","14"]}),{default:l(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-docker"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jdk-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," builder")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," . /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," cd /app && ./gradlew build -xtest")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-slim-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," optimizer")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=builder /app/build/libs/spring-petclinic-3.3.0.jar /app/app.jar")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"WORKDIR"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," java -Djarmode=tools -jar /app/app.jar extract --layers --launcher")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-slim-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," runner")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"ENTRYPOINT"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," ["),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"java"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},", "),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"org.springframework.boot.loader.launch.JarLauncher"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/app/dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/app/spring-boot-loader/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/app/snapshot-dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/app/application/ ./")])])],-1)])),_:1},16),a[5]||(a[5]=i("ul",null,[i("li",null,"Build image")],-1)),t(e,{at:"1"},{default:l(()=>a[1]||(a[1]=[i("ul",null,[i("li",null,'Introduce new "optimizer" stage')],-1)])),_:1}),t(e,{at:"3"},{default:l(()=>a[2]||(a[2]=[i("ul",null,[i("li",null,"Extract the jar to layered structure")],-1)])),_:1}),t(e,{at:"5"},{default:l(()=>a[3]||(a[3]=[i("ul",null,[i("li",null,"Copy layers")],-1)])),_:1})]),_:1},16)}}};export{Y as default};
